{% extends 'base.html' %}

{% load django_browser_reload %}
{% load widget_tweaks %}

{% load static %}

{% block title %}Iniciar Sesión - Nutrición YL{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/styles_usuarios_login.css' %}">
{% endblock %}

{% block content %}
<div class="decoration decoration-1"></div>
<div class="decoration decoration-2"></div>
<div class="decoration decoration-3"></div>
<div class="decoration decoration-4"></div>
<div class="decoration decoration-5"></div>

<div class="login-container">
    <div class="logo-section">
        <div class="logo">
            <img src="{% static 'images/yiyo_logo-.png' %}" alt="Nutrición & Bienestar" class="navbar-logo">
        </div>
        <h1 class="welcome-text">Bienvenido</h1>
        <p class="subtitle">Tu portal hacia una vida más saludable</p>
    </div>

    <form class="login-form" method="post">
        {% csrf_token %}
        
        {%if form.non_field_errors%}
        <div class="alert alert-danger">
            {{form.non_field_errors}}
        </div>
        {% endif %}

        <div class="form-group">
            {{ form.username.label_tag }}
            {{ form.username|add_class:"form-input" }}
            {% if form.username.errors %}
                <span class="error">{{ form.username.errors }}</span>
            {% endif %}
        </div>

        <div class="form-group" style="position: relative;">
            {{ form.password.label_tag }}
            {{ form.password|add_class:"form-input" }}
            {% if form.password.errors %}
                <span class="error">{{ form.password.errors }}</span>
            {% endif %}

            <button 
                type="button" 
                class="password-toggle" 
                onclick="togglePassword()" 
                style="position: absolute; top: 50%; right: 10px; transform: translateY(-50%); background: none; border: none; cursor: pointer;"
            >
                <i id="toggleIcon" class="fa-regular fa-eye"></i>
            </button>
        </div>

        <div class="forgot-password">
            <a href="#" onclick="showForgotPassword()">¿Olvidaste tu contraseña?</a>
        </div>

        <button type="submit" class="login-button"> Iniciar Sesión </button>
    </form>

    <div class="signup-link">
        ¿No tienes cuenta? <a href="{% url 'usuarios:registro' %}">Registrate </a>
    </div>
</div>




<script>
    function togglePassword() {
    const passwordInput = document.getElementById("id_password");
    const toggleIcon = document.getElementById("toggleIcon");

    if (passwordInput.type === "password") {
        passwordInput.type = "text";
        toggleIcon.classList.remove("fa-eye");
        toggleIcon.classList.add("fa-eye-slash");
    } else {
        passwordInput.type = "password";
        toggleIcon.classList.remove("fa-eye-slash");
        toggleIcon.classList.add("fa-eye");
    }
}
    function showForgotPassword() {
        alert('Te enviaremos un enlace de recuperación a tu correo 📧');
    }
</script>
{% endblock %}
